<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Chess Board</title>
		
		<!-- Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- DaisyUI -->
		<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Custom CSS for intensity animations -->
		<style>
			@keyframes pulse {
				0% { transform: scale(1); opacity: 1; }
				50% { transform: scale(1.05); opacity: 0.8; }
				100% { transform: scale(1); opacity: 1; }
			}
			@keyframes fadeIn {
				0% { opacity: 0; transform: scale(0.8); }
				100% { opacity: 1; transform: scale(1); }
			}
			.intensity-spike {
				animation: pulse 0.5s ease-in-out infinite;
			}
			#gameOverModal {
				backdrop-filter: blur(5px);
			}
		</style>
		
		<!-- Chessboard2 CSS -->
		<link rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboard2@0.5.0/dist/chessboard2.min.css"
      integrity="sha384-47VeTDpmy4yT21gKPXQcLQYQZwlmz27gEH5NTrOmTk3G/SGvMyltclOW/Q8uE+sL"
      crossorigin="anonymous">
		
		<!-- Chessboard2 JavaScript -->
		<script src="https://unpkg.com/@chrisoakman/chessboard2@0.5.0/dist/chessboard2.min.js"
        integrity="sha384-/KwQCjA1GWovZNV3QDVtvSMDzO4reGgarF/RqHipr7hIUElH3r5zNl9WEPPOBRIF"
        crossorigin="anonymous"></script>
		
		<!-- Chess.js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js" 
		integrity="sha512-xRllwz2gdZciIB+AkEbeq+gVhX8VB8XsfqeFbUh+SzHlN96dEduwtTuVuc2u9EROlmW9+yhRlxjif66ORpsgVA==" 
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	
	</head>
	<body class="bg-base-200 min-h-screen">
		<div class="navbar bg-primary text-primary-content shadow-lg">
			<div class="flex-1">
				<a class="btn btn-ghost text-xl">‚ôüÔ∏è Chess Game</a>
			</div>
			<div class="flex-1 flex justify-center">
				<button class="btn btn-secondary" id="newGameBtn" onclick="resetGame()">New Game</button>
			</div>
			<div class="flex-1">
			</div>
			<div class="pr-4">
				<button class="btn btn-primary" id="volumeToggleBtn" onclick="toggleMusic()">üîä Play Epic Battle</button>
			</div>
		</div>
		
		<main class="container mx-auto py-8 px-4">
			<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
				<!-- Chess Board Section -->
				<div class="lg:col-span-2">
					<div class="card bg-base-100 shadow-xl">
						<div class="card-body">
							<h2 class="card-title justify-center text-2xl mb-4">Chess Board</h2>
							<div id="board2" style="width: 750px; margin: 0 auto;" class="shadow-2xl rounded-lg overflow-hidden"></div>
							<div class="card-actions justify-center mt-4">
								<button class="btn btn-primary" onclick="resetGame()">New Game</button>
								<button class="btn btn-outline" onclick="undoMove()">Undo Move</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Music Panel Section -->
				<div class="lg:col-span-1">
					<div class="card bg-base-100 shadow-xl">
						<div class="card-body">
							<h2 class="card-title text-xl mb-4">üéµ Epic Battle Music</h2>
							
							<!-- Current Track Info -->
							<div class="mb-4">
								<div class="text-sm font-semibold mb-2">Current Track:</div>
								<div id="currentTrack" class="text-lg font-bold text-primary">Loading from Jamendo API...</div>
								<div class="text-xs opacity-70" id="trackDescription">Epic battle music by Carvine</div>
							</div>

							<!-- Intensity Meter -->
							<div class="mb-4">
								<div class="text-sm font-semibold mb-2">Volume Level:</div>
								<div class="w-full bg-base-200 rounded-full h-4 mb-2">
									<div id="intensityBar" class="bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 h-4 rounded-full transition-all duration-500" style="width: 50%"></div>
								</div>
								<div class="text-xs opacity-70" id="intensityText">Volume: 50%</div>
							</div>

							<!-- Move Statistics -->
							<div class="mb-4">
								<div class="text-sm font-semibold mb-2">Game Statistics:</div>
								<div class="text-xs space-y-1">
									<div>Move: <span id="moveCount" class="font-bold">0</span></div>
									<div>Captures: <span id="captureCount" class="font-bold">0</span></div>
									<div>Game Phase: <span id="gamePhase" class="font-bold">Opening</span></div>
								</div>
							</div>

							<!-- Music Controls -->
							<div class="space-y-2">
								<div class="text-sm font-semibold">Controls:</div>
								<div class="flex gap-2">
									<button class="btn btn-sm btn-primary flex-1" id="playPauseBtn" onclick="toggleMusic()">‚ñ∂Ô∏è</button>
									<button class="btn btn-sm btn-outline flex-1" onclick="testJamendoAPI()">Test API</button>
								</div>
								
								<!-- Volume Control -->
								<div class="mt-3">
									<div class="text-xs font-semibold mb-1">Volume:</div>
									<input type="range" class="range range-xs range-primary" id="volumeSlider" min="0" max="100" value="50">
									<div class="text-xs opacity-70 text-center" id="volumeDisplay">50%</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
		
		<!-- Game Over Modal -->
		<div id="gameOverModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
			<div class="bg-white rounded-lg p-8 max-w-md mx-4 text-center">
				<div class="text-6xl mb-4">üéØ</div>
				<h2 class="text-3xl font-bold text-red-600 mb-4">CHECKMATE!</h2>
				<div id="gameOverMessage" class="text-xl mb-6"></div>
				<div class="text-sm text-gray-600 mb-6">
					<span class="text-red-500 font-bold">Epic Battle Complete!</span><br>
					Music intensity at maximum!
				</div>
				<div class="space-y-2">
					<button class="btn btn-primary w-full" onclick="resetGame(); hideGameOverModal();">New Game</button>
					<button class="btn btn-outline w-full" onclick="hideGameOverModal();">Continue Music</button>
				</div>
			</div>
		</div>
		
		<!-- Music System -->
		<script src="music.js"></script>
		<!-- Your custom logic -->
		<script src="logic.js"></script>
	</body>
</html>
